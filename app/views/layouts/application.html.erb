<!DOCTYPE html>
<html>
<head>
  <title>Sumpoints</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>
  <body>
    <div class="container">

      <!-- MENU Start-->
      <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
          
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">SumPoints</a>
          </div>

          <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li class="<%= 'active' if current_page?(about_path) %>"><%= link_to "About", about_path %></li>
              <li class="<%= 'active' if current_page?(root_path) %>"><%= link_to "Home", root_path %></li>
              
              <li><a href="#">Top SumPoints</a></li>

              <li class="<%= 'active' if current_page?(posts_latest_path) %>">
                <%= link_to "Top Posts", posts_latest_path %>
              </li>
              
              

              <!-- if user can create new post, link to new post, otherwise redirect to signup -->
              <li class="<%= 'active' if current_page?(new_post_path) %>">
                <%if policy(Post.new).create? %>
                  <%= link_to "Submit", new_post_path %>
                <% else %>
                  <%= link_to "Submit", new_user_registration_path %> 
                <% end %>               
              </li>
              <!-- end of if -->

              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Browse<span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="#">Tags</a></li>
                  <li class="divider"></li>
                  <li><%= link_to "Articles", articles_path %></li>
                  <li><%= link_to "Books", books_path %></li>
                  <li><%= link_to "Videos", videos_path %></li>
                  <li><%= link_to "Audio", audio_path %></li>
                </ul>
              </li>
            </ul>

            <!--Search bar -->

            <!--Search bar END -->

            <!-- user info area -->
            <ul class="nav navbar-nav navbar-right">
              <% if current_user %>
                <p class="navbar-text">
                  Logged in as 
                  <%= link_to (current_user.name || current_user.email), edit_user_registration_path %>
                </p>
                <li><%= link_to "Sign out", destroy_user_session_path, method: :delete %></li>
              
              <% else %>
                <li class="<%= 'active' if current_page?(new_user_session_path) %>">
                  <%= link_to "Sign In", new_user_session_path %>
                </li>

                <li class="<%= 'active' if current_page?(new_user_registration_path) %>">
                  <%= link_to "Sign Up", new_user_registration_path %>
                </li>

              <% end %>
            </ul>


          </div><!--/.nav-collapse -->
        </div><!-- /.container-fluid -->
      </nav>  
      <!-- MENU End-->


      <!--flash messages-->
      <% if flash[:notice] %>
        <div class="alert alert-success">
          <button type="button" class="close" data-dismiss="alert">&times;</button>
          <%= flash[:notice] %>
        </div>
      <% elsif flash[:error] %>
        <div class="alert alert-danger">
          <button type="button" class="close" data-dismiss="alert">&times;</button>
          <%= flash[:error] %>
        </div>
      <% elsif flash[:alert] %>
        <div class="alert alert-warning">
          <button type="button" class="close" data-dismiss="alert">&times;</button>
          <%= flash[:alert] %>
        </div>
      <% end %>
      <!-- end of flash message area-->
        

    <%= yield %>
    </div>

  </body>
</html>
